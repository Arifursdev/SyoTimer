/**
 * SyoTimer v.2.0.0-alpha | under MIT licence
 * https://github.com/mrfratello/SyoTimer#readme
 */
!function(e){const t=86400,i=3600,n=60;var o={rus:{second:["секунда","секунды","секунд"],minute:["минута","минуты","минут"],hour:["час","часа","часов"],day:["день","дня","дней"]},eng:{second:["second","seconds"],minute:["minute","minutes"],hour:["hour","hours"],day:["day","days"]}};const r={year:2014,month:7,day:31,hour:0,minute:0,second:0,timeZone:"local",ignoreTransferTime:!1,periodic:!1,periodInterval:7,periodUnit:"d",dayVisible:!0,doubleNumbers:!0,effectType:"none",lang:"eng",headTitle:"",footTitle:"",afterDeadline:function(e){e.bodyBlock.html('<p style="font-size: 1.2em;">The countdown is finished!</p>')}};var a={init:function(t){var i=e.extend({},r,t||{});return this.each(function(){var t=e(this);t.data("syotimer-options",i),a._render.apply(this,[]),a._perSecondHandler.apply(this,[])})},_render:function(){var t,i,n,o=["day","hour","minute","second"],r=e(this),a=r.data("syotimer-options"),d=s.getTimerItem();t=e("<div/>").addClass("syotimer__head").append(a.headTitle),n=e("<div/>").addClass("syotimer__footer").append(a.headTitle),i=e("<div/>").addClass("syotimer__body");for(var l=0;l<o.length;l++){var c=d.clone();c.addClass("syotimer-cell_"+o[l]),i.append(c)}r.addClass("syotimer").append(t).append(i).append(n);var u={headBlock:t,bodyBlock:i,footBlock:n};r.data("syotimer-blocks",u)},_perSecondHandler:function(){var t=e(this),i=t.data("syotimer-options");e(".syotimer-cell_second > .syotimer-cell__value",t).css("opacity",1);var n=new Date,o=new Date(i.year,i.month-1,i.day,i.hour,i.minute,i.second),r=s.getDifferenceWithTimezone(n,o,i),d=s.getSecondsToDeadLine(r,i);d>=0?(a._refreshUnitsDom.apply(this,[d]),a._applyEffectSwitch.apply(this,[i.effectType])):(t=e.extend(t,t.data("syotimer-blocks")),i.afterDeadline(t))},_refreshUnitsDom:function(t){var i=e(this),n=i.data("syotimer-options"),r=["day","hour","minute","second"],a=s.getUnitsToDeadLine(t),d=o[n.lang];n.dayVisible||(a.hour+=24*a.day,r.splice(0,1));for(var l=0;l<r.length;l++){var c=r[l],u=".syotimer-cell_"+c;e(u+" > .syotimer-cell__value",i).html(s.format2(a[c],"day"!=c&&n.doubleNumbers)),e(u+" > .syotimer-cell__unit",i).html(s.definitionOfNumerals(a[c],d[c],n.lang))}},_applyEffectSwitch:function(t){var i=this,n=e(i);switch(t){case"none":setTimeout(function(){a._perSecondHandler.apply(i,[])},1e3);break;case"opacity":e(".syotimer-cell_second > .syotimer-cell__value",n).animate({opacity:.1},1e3,"linear",function(){a._perSecondHandler.apply(i,[])})}}},s={getTimerItem:function(){var t=e("<div/>").addClass("syotimer-cell__value").html("0"),i=e("<div/>").addClass("syotimer-cell__unit"),n=e("<div/>").addClass("syotimer-cell");return n.append(t).append(i),n},getSecondsToDeadLine:function(e,t){var i,n=e/1e3;if(n=Math.floor(n),t.periodic){var o,r,a=s.getPeriodUnit(t.periodUnit),d=e/(1e3*a);d=Math.ceil(d),d=Math.abs(d),n>=0?(r=d%t.periodInterval,r=0==r?t.periodInterval:r,r-=1):r=t.periodInterval-d%t.periodInterval,o=n%a,0==o&&n<0&&r--,i=Math.abs(r*a+o)}else i=n;return i},getUnitsToDeadLine:function(e){for(var t=["day","hour","minute","second"],i={},n=0;n<t.length;n++){var o=t[n],r=s.getPeriodUnit(o);i[o]=Math.floor(e/r),e%=r}return i},getPeriodUnit:function(e){switch(e){case"d":case"day":return t;case"h":case"hour":return i;case"m":case"minute":return n;case"s":case"second":return 1}},getDifferenceWithTimezone:function(e,t,i){var n,o=t.getTime()-e.getTime(),r=0,a=0;if("local"!==i.timeZone){var d=parseFloat(i.timeZone)*s.getPeriodUnit("hour"),l=-e.getTimezoneOffset()*s.getPeriodUnit("minute");r=1e3*(d-l)}if(i.ignoreTransferTime){var c=-e.getTimezoneOffset()*s.getPeriodUnit("minute"),u=-t.getTimezoneOffset()*s.getPeriodUnit("minute");a=1e3*(c-u)}return n=r+a,o-n},format2:function(e,t){return t=t!==!1,e<=9&&t?"0"+e:""+e},definitionOfNumerals:function(e,t,i){switch(i){case"rus":var n,o=[2,0,1,1,1,2];return n=e%100>4&&e%100<20?2:o[e%10<5?e%10:5],t[n];case"eng":return t[1==e?0:1]}}},d={setOption:function(t,i){var n=e(this),o=n.data("syotimer-options");o.hasOwnProperty(t)&&(o[t]=i,n.data("syotimer-options",o))}};e.fn.syotimer=function(t){if("string"==typeof t&&"setOption"===t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){d[t].apply(this,i)})}return null===t||"object"==typeof t?a.init.apply(this,[t]):void e.error("SyoTimer. Error in call methods: methods is not exist")}}(jQuery);
//# sourceMappingURL=jquery.syotimer.min.js.map
